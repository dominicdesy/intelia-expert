=== UNBOUND VARIABLE ANALYSIS - 84 errors ===

================================================================================
CATEGORY 1: CONDITIONAL IMPORTS (CamelCase) - FALSE POSITIVES
================================================================================
Total: 28 errors

These are imports wrapped in try/except - code is already protected

  cache\redis_cache_manager.py:77 - SemanticCacheManager
  cache\redis_cache_manager.py:89 - CacheStatsManager
  core\json_system.py:72 - JSONExtractor
  core\json_system.py:73 - TableExtractor
  core\json_system.py:74 - GeneticLineExtractor
  core\json_system.py:77 - JSONValidator
  core\json_system.py:80 - IngestionPipeline
  core\json_system.py:89 - EnhancedCacheManager
  core\json_system.py:97 - DocumentProcessor
  core\json_system.py:116 - HybridSearchEngine
  ... and 18 more

================================================================================
CATEGORY 2: CONFIG CONSTANTS (UPPERCASE) - FALSE POSITIVES
================================================================================
Total: 0 errors

These are config constants with try/except fallbacks


================================================================================
CATEGORY 3: API ROUTE VARIABLES - LIKELY FALSE POSITIVES
================================================================================
Total: 2 errors

These are request parsing vars - protected by FastAPI validation

  api\endpoints_chat\chat_routes.py:196 - tenant_id
  api\endpoints_chat\chat_routes.py:197 - message

================================================================================
CATEGORY 4: LIKELY IMPORTS (common stdlib/packages)
================================================================================
Total: 11 errors

  core\rag_langsmith.py:51 - Client
  evaluation\ragas_evaluator.py:128 - Dataset
  evaluation\ragas_evaluator.py:182 - Features
  evaluation\ragas_evaluator.py:183 - Value
  evaluation\ragas_evaluator.py:184 - Value
  evaluation\ragas_evaluator.py:185 - Sequence
  evaluation\ragas_evaluator.py:185 - Value
  evaluation\ragas_evaluator.py:189 - Value
  evaluation\ragas_evaluator.py:191 - Dataset
  evaluation\ragas_evaluator.py:224 - evaluate
  generation\veterinary_handler.py:80 - json

================================================================================
CATEGORY 5: REAL SUSPECTS - NEEDS MANUAL REVIEW
================================================================================
Total: 43 errors

These are lowercase variables in logic - may be real bugs!


[FILE] api\admin_endpoint_handlers.py (1 suspects)
  Line  448: rag_engine

[FILE] api\endpoints_diagnostic\search_routes.py (1 suspects)
  Line  438: retriever

[FILE] api\endpoints_diagnostic\weaviate_routes.py (4 suspects)
  Line  172: parsed_url
  Line  195: parsed_url
  Line  196: parsed_url
  Line  196: parsed_url

[FILE] cache\cache_semantic.py (1 suspects)
  Line  771: semantic_key

[FILE] core\memory.py (1 suspects)
  Line  462: age

[FILE] evaluation\ragas_evaluator.py (4 suspects)
  Line  120: context_precision
  Line  121: context_recall
  Line  122: faithfulness
  Line  123: answer_relevancy

[FILE] generation\generators.py (4 suspects)
  Line   70: get_prompts_manager
  Line   72: get_prompts_manager
  Line  296: get_message
  Line  457: context_hash

[FILE] generation\response_generator.py (1 suspects)
  Line  222: context_hash

[FILE] generation\veterinary_handler.py (1 suspects)
  Line  221: get_message

[FILE] retrieval\postgresql\normalizer.py (4 suspects)
  Line  274: normalizer
  Line  287: normalizer
  Line  296: normalizer
  Line  305: normalizer

[FILE] retrieval\postgresql\retriever.py (3 suspects)
  Line   87: asyncpg
  Line  645: total_feed_tonnes
  Line  663: total_feed_tonnes

[FILE] retrieval\reranker.py (1 suspects)
  Line   67: cohere

[FILE] retrieval\weaviate\core.py (9 suspects)
  Line  227: weaviate
  Line  239: weaviate
  Line  241: weaviate
  Line  265: weaviate
  Line  411: create_intent_processor
  Line  414: create_intent_processor
  Line  429: create_response_guardrails
  Line  612: search_query
  Line  624: search_query

[FILE] scripts\test_embedding_quality.py (2 suspects)
  Line  318: baseline_avg
  Line  321: baseline_model

[FILE] security\guardrails\evidence_checker.py (3 suspects)
  Line  140: strong_support
  Line  141: moderate_support
  Line  142: weak_support

[FILE] security\guardrails\hallucination_detector.py (1 suspects)
  Line   89: verification_results

[FILE] security\ood\query_normalizer.py (1 suspects)
  Line   95: unidecode

[FILE] utils\monitoring.py (1 suspects)
  Line  415: cache_core

================================================================================
SUMMARY
================================================================================
Total errors: 84
  Conditional imports: 28 (FALSE POSITIVE)
  Config constants:    0 (FALSE POSITIVE)
  API route vars:      2 (LIKELY FALSE POSITIVE)
  Likely imports:      11 (FALSE POSITIVE)
  [!] REAL SUSPECTS:   43 (NEEDS REVIEW)

Estimated breakdown:
  [OK] Definite false positives: 39 (46.4%)
  [?]  Likely OK (API routes):   2 (2.4%)
  [!]  Need manual review:       43 (51.2%)

[OK] Real suspects saved to: unbound_vars_suspects.txt

# ===== REQUIREMENTS.TXT - INTELIA EXPERT BACKEND =====
# Version 4.1 - Système RAG JSON Core (Dépendances Essentielles)
# Optimized for Digital Ocean - Lightweight language detection

# === CORE FASTAPI - Versions stables ===
fastapi==0.112.2
uvicorn[standard]==0.37.0
python-dotenv==1.0.1

# === HTTP CLIENTS - Versions compatibles ===
httpx[http2]==0.27.0
httpcore==1.0.5
anyio>=4.0.0

# === OPENAI API - Version LTS stable ===
openai==1.42.0

# === ANTHROPIC CLAUDE API - Multi-LLM Router ===
anthropic>=0.40.0

# === WEAVIATE CLIENT - Version corrigée pour dimensions ===
weaviate-client==4.16.10

# === REDIS CACHE - Performance optimisée ===
redis[hiredis]==6.4.0
hiredis==2.3.2

# === BASE DE DONNÉES POSTGRESQL ===
# Support PostgreSQL pour données structurées et performance records
asyncpg==0.29.0
psycopg2-binary==2.9.9
sqlalchemy[asyncio]==2.0.23
alembic==1.13.1

# === VALIDATION ET SCHÉMAS JSON ===
# Validation avancée de documents JSON avicoles
jsonschema==4.20.0
jsonref==1.1.0
json-flatten==0.3.1
ujson==5.8.0
orjson==3.9.10

# === EXTRACTEURS AVICOLES ESSENTIELS ===
# Extraction de base sans dépendances lourdes
pdfplumber==0.10.0
python-docx==1.1.0
openpyxl==3.1.2

# === TRAITEMENT DONNÉES AVICOLES ===
# Normalisation et validation données biologiques
pint==0.23
dateparser==1.2.0
fuzzywuzzy[speedup]==0.18.0
python-levenshtein==0.25.0

# === INGESTION ET PIPELINE ===
# Pipeline de traitement batch
python-multipart==0.0.6
aiofiles>=23.0.0

# === CORRECTIONS BUGS PRODUCTION ===
# Google Cloud Translation - VERSION CORRIGÉE API
google-cloud-translate>=3.15.0,<4.0.0
google-auth>=2.23.0
google-auth-oauthlib>=1.0.0

# Retry et résilience
tenacity>=8.2.0
backoff>=2.2.0

# Utilitaires ML
scikit-learn>=1.3.0,<1.5.0

# Monitoring avancé
memory-profiler>=0.61.0

# === LANGUAGE DETECTION - LIGHTWEIGHT ===
# fasttext-langdetect (no compilation needed) + langdetect as fallback
# No heavy FastText models - uses pre-packaged detection
fasttext-langdetect>=1.0.3
langdetect>=1.0.9
cachetools>=5.3.0

# === TEXT PROCESSING ===
unidecode==1.4.0

# === RERANKING - PRODUCTION ===
# Cohere API for result reranking (lightweight, API-based)
cohere>=5.0.0

# === HYBRID SEARCH ===
# BM25 ranking algorithm (lightweight)
rank-bm25==0.2.2

# === NOTE: HEAVY ML PACKAGES MOVED TO requirements-dev.txt ===
# The following packages are now in requirements-dev.txt (development only):
# - torch, transformers (~1.3GB) - Not used in production
# - sentence-transformers, voyageai - Optional embeddings
# - ragas, datasets - Evaluation framework
# - faiss-cpu - Vector search (we use Weaviate cloud)
# - statsmodels, lifelines, pingouin - Statistical analysis scripts only

# === LANGSMITH MONITORING ===
langchain-core==0.1.52
langsmith>=0.1.0,<0.2.0

# === RAGAS EVALUATION FRAMEWORK ===
# RAGAS for RAG evaluation (moved from dev dependencies for admin endpoints)
# Using ragas 0.1.1 which is compatible with langchain-core 0.1.x
ragas==0.1.1
datasets>=2.14.0

# === LANGCHAIN POUR RAGAS ===
# LangChain OpenAI pour évaluateur RAGAS
langchain-openai>=0.0.5

# === UTILITAIRES BASE ===
numpy>=1.24.0,<2.0.0
scipy>=1.11.0,<1.15.0
pandas>=2.0.0,<3.0.0

# === GESTION MÉTADONNÉES ===
python-slugify==8.0.1
nameparser==1.1.3
regex==2023.12.25

# === SÉCURITÉ ET VALIDATION ===
pydantic>=2.8.0,<3.0.0
validators>=0.22.0
bleach>=6.0.0

# === CACHE INTELLIGENT ESSENTIEL ===
diskcache==5.6.3
pylru==1.2.1

# === MONITORING ET LOGGING ===
prometheus-client==0.20.0
structlog==23.2.0

# === TESTS - Versions compatibles ===
pytest==8.3.3
pytest-asyncio==0.24.0
pytest-postgresql==6.0.0
pytest-benchmark==4.0.0

# === TESTS SPÉCIALISÉS AVICOLE ===
hypothesis==6.92.1
factory-boy==3.3.0
faker==20.1.0

# === OUTILS DÉVELOPPEMENT ===
black==24.10.0
flake8==7.1.1
mypy==1.7.1

# === ASYNC ET AGENTS ===
dataclasses-json==0.6.7
asyncio-throttle==1.0.2

# === PARALLÉLISATION ESSENTIELLE ===
joblib==1.3.2

# === COMPATIBILITÉ PYTHON 3.13 ===
typing-extensions>=4.8.0

# === CONTRAINTES SÉCURITÉ ===
urllib3>=2.0.0,<3.0.0
certifi>=2023.7.22
cryptography>=41.0.7
requests>=2.31.0

# === SÉCURITÉ DONNÉES AVICOLES ===
keyring==24.3.0
python-jose[cryptography]==3.3.0

# === OPTIMISATIONS DÉPLOIEMENT ===
brotli>=1.0.9
zstandard>=0.22.0
psutil>=5.9.0

# === OPTIMISATIONS PRODUCTION ===
gunicorn==21.2.0
gevent==23.9.1
setproctitle==1.3.3

# === GESTION CONFIGURATION ===
dynaconf==3.2.4
python-decouple==3.8
click==8.1.7

# === FORMATS DONNÉES SPÉCIALISÉS ===
xmltodict==0.13.0
pyyaml==6.0.1
toml==0.10.2
configparser==6.0.0

# === CONTRAINTES FINALES ===
setuptools>=65.0.0
wheel>=0.42.0
pip>=23.0.0

# === NOTES IMPORTANTES ===
# 1. Language detection: fasttext-langdetect (primary) + langdetect (fallback)
# 2. PostgreSQL requis pour données structurées performance
# 3. Système JSON avec extracteurs essentiels uniquement
# 4. Tests inclus pour CI/CD
# 5. Monitoring de base pour production
# 6. Cache disk + Redis pour production
# 7. No heavy model downloads - lightweight packages only
# 8. Development tools (RAGAS, ML frameworks) in requirements-dev.txt
# 9. Install dev deps: pip install -r requirements-dev.txt
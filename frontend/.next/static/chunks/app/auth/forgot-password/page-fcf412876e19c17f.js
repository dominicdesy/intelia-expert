(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[47],{153:function(e,s,t){Promise.resolve().then(t.bind(t,8952))},8952:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return d}});var r=t(7437),o=t(2265),n=t(7648),a=t(7667),l=t(6733),i=t(257);const c=e=>{let{className:s="w-12 h-12"}=e;return(0,r.jsx)("img",{src:"/images/favicon.png",alt:"Intelia Logo",className:s})};function d(){const{t:e,currentLanguage:s,changeLanguage:t}=(0,a.$G)(),[d,u]=(0,o.useState)(""),[m,g]=(0,o.useState)(!1),[x,h]=(0,o.useState)(""),[f,p]=(0,o.useState)("");(0,o.useEffect)((()=>{try{const r=localStorage.getItem("intelia-language");let o=null;if(r){var e;const n=JSON.parse(r);o=null===n||void 0===n||null===(e=n.state)||void 0===e?void 0:e.currentLanguage,o&&o!==s&&(console.log("[FORGOT] Resynchronisation imm\xe9diate: ".concat(s," \u2192 ").concat(o)),t(o))}document.documentElement.setAttribute("lang",o||s)}catch(f){console.warn("[FORGOT] Erreur lecture localStorage:",f)}}),[s,t]);const b=async()=>{if(p(""),h(""),d.trim())if(/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(d.trim())){g(!0);try{const s=await fetch("".concat(i.env.NEXT_PUBLIC_API_BASE_URL||"https://expert-app-cngws.ondigitalocean.app/api","/v1/auth/reset-password"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:d.trim()})});if(!s.ok){const e=await s.json().catch((()=>({})));throw new Error(e.detail||"Erreur ".concat(s.status))}h("".concat(e("forgotPassword.emailSent")," ").concat(d.trim())),u("")}catch(f){f.message.includes("404")?p(e("forgotPassword.emailNotFound")):f.message.includes("429")?p(e("forgotPassword.tooManyAttempts")):f.message.includes("Failed to fetch")?p(e("forgotPassword.connectionError")):p(f.message||e("forgotPassword.genericError"))}finally{g(!1)}}else p(e("forgotPassword.invalidEmail"));else p(e("forgotPassword.enterEmail"))};return(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-green-50 flex items-center justify-center p-6",children:[(0,r.jsx)("div",{className:"absolute top-4 right-4",children:(0,r.jsx)(l.$z,{})}),(0,r.jsxs)("div",{className:"w-full max-w-md",children:[(0,r.jsxs)("div",{className:"text-center mb-8",children:[(0,r.jsx)("div",{className:"flex justify-center mb-4",children:(0,r.jsx)(c,{className:"w-12 h-12"})}),(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:e("forgotPassword.title")}),(0,r.jsx)("p",{className:"text-gray-600 leading-relaxed",children:e("forgotPassword.description")})]}),f&&(0,r.jsx)("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 text-red-700 rounded-lg text-sm",children:(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("svg",{className:"w-4 h-4 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})}),(0,r.jsx)("span",{children:f})]})}),x&&(0,r.jsxs)("div",{className:"mb-6 p-4 bg-green-50 border border-green-200 text-green-700 rounded-lg text-sm",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("svg",{className:"w-4 h-4 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,r.jsx)("span",{children:x})]}),(0,r.jsx)("div",{className:"mt-2 text-xs text-green-600",children:e("forgotPassword.checkInbox")})]}),(0,r.jsx)("div",{className:"bg-white p-6 rounded-lg shadow-lg border border-gray-200",children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:e("forgotPassword.emailLabel")}),(0,r.jsx)("input",{type:"email",id:"email",value:d,onChange:e=>u(e.target.value),onKeyPress:e=>"Enter"===e.key&&b(),className:"w-full px-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-colors",placeholder:e("forgotPassword.emailPlaceholder"),disabled:m,autoComplete:"email"})]}),(0,r.jsx)("button",{type:"button",onClick:b,disabled:m||!d.trim(),className:"w-full py-3 px-4 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 focus:ring-4 focus:ring-blue-200 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:m?(0,r.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,r.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),(0,r.jsx)("span",{children:e("forgotPassword.sending")})]}):e("forgotPassword.sendButton")})]})}),(0,r.jsxs)("div",{className:"mt-6 text-center space-y-3",children:[(0,r.jsxs)(n.default,{href:"/",className:"inline-flex items-center text-sm text-blue-600 hover:text-blue-700 font-medium transition-colors",children:[(0,r.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),e("forgotPassword.backToLogin")]}),(0,r.jsxs)("div",{className:"text-xs text-gray-500",children:[e("forgotPassword.noAccount")," ",(0,r.jsx)(n.default,{href:"/?signup=true",className:"text-blue-600 hover:underline transition-colors",children:e("auth.createAccount")})]})]}),(0,r.jsx)("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg text-center",children:(0,r.jsxs)("p",{className:"text-xs text-gray-600",children:[e("forgotPassword.supportProblem")," ",(0,r.jsx)("button",{type:"button",onClick:()=>window.open("mailto:support@intelia.com?subject=Probl\xe8me r\xe9initialisation mot de passe","_blank"),className:"text-blue-600 hover:underline font-medium transition-colors",children:e("forgotPassword.contactSupport")})]})}),(0,r.jsx)("div",{className:"mt-6 text-center",children:(0,r.jsxs)("p",{className:"text-xs text-gray-500 leading-relaxed",children:[e("forgotPassword.securityInfo"),(0,r.jsx)("br",{}),e("forgotPassword.securityInfo2")]})}),!1]})]})}},8225:function(e,s,t){"use strict";t.d(s,{getSupabaseClient:function(){return i}});var r=t(9296),o=t(257);const n=o.env.NEXT_PUBLIC_SUPABASE_URL,a=o.env.NEXT_PUBLIC_SUPABASE_ANON_KEY;if(!n||!a)throw new Error("\u274c Variables Supabase manquantes: NEXT_PUBLIC_SUPABASE_URL et NEXT_PUBLIC_SUPABASE_ANON_KEY requises");let l=null;const i=()=>(l?console.log("\u267b\ufe0f [Supabase] R\xe9utilisation instance singleton existante"):(console.log("\ud83d\ude80 [Supabase] Cr\xe9ation instance singleton"),l=(0,r.eI)(n,a,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0,flowType:"pkce",storage:window.localStorage,storageKey:"intelia-expert-auth"},global:{headers:{"X-Client-Info":"intelia-expert-app"}},realtime:{params:{eventsPerSecond:10}}}),console.log("\u2705 [Supabase] Instance singleton cr\xe9\xe9e avec succ\xe8s")),l);i()}},function(e){e.O(0,[216,733,744],(function(){return s=153,e(e.s=s);var s}));var s=e.O();_N_E=s}]);
"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[953],{9953:function(e,a,l){l.d(a,{FE:function(){return i},aC:function(){return c},rememberMeUtils:function(){return u}});var t=l(2265);const o=[{value:"CA",label:"Canada",phoneCode:"+1",flag:"\ud83c\udde8\ud83c\udde6"},{value:"US",label:"\xc9tats-Unis",phoneCode:"+1",flag:"\ud83c\uddfa\ud83c\uddf8"},{value:"FR",label:"France",phoneCode:"+33",flag:"\ud83c\uddeb\ud83c\uddf7"},{value:"GB",label:"Royaume-Uni",phoneCode:"+44",flag:"\ud83c\uddec\ud83c\udde7"},{value:"DE",label:"Allemagne",phoneCode:"+49",flag:"\ud83c\udde9\ud83c\uddea"},{value:"IT",label:"Italie",phoneCode:"+39",flag:"\ud83c\uddee\ud83c\uddf9"},{value:"ES",label:"Espagne",phoneCode:"+34",flag:"\ud83c\uddea\ud83c\uddf8"},{value:"BE",label:"Belgique",phoneCode:"+32",flag:"\ud83c\udde7\ud83c\uddea"},{value:"CH",label:"Suisse",phoneCode:"+41",flag:"\ud83c\udde8\ud83c\udded"},{value:"MX",label:"Mexique",phoneCode:"+52",flag:"\ud83c\uddf2\ud83c\uddfd"},{value:"BR",label:"Br\xe9sil",phoneCode:"+55",flag:"\ud83c\udde7\ud83c\uddf7"},{value:"AU",label:"Australie",phoneCode:"+61",flag:"\ud83c\udde6\ud83c\uddfa"},{value:"JP",label:"Japon",phoneCode:"+81",flag:"\ud83c\uddef\ud83c\uddf5"},{value:"CN",label:"Chine",phoneCode:"+86",flag:"\ud83c\udde8\ud83c\uddf3"},{value:"IN",label:"Inde",phoneCode:"+91",flag:"\ud83c\uddee\ud83c\uddf3"},{value:"NL",label:"Pays-Bas",phoneCode:"+31",flag:"\ud83c\uddf3\ud83c\uddf1"},{value:"SE",label:"Su\xe8de",phoneCode:"+46",flag:"\ud83c\uddf8\ud83c\uddea"},{value:"NO",label:"Norv\xe8ge",phoneCode:"+47",flag:"\ud83c\uddf3\ud83c\uddf4"},{value:"DK",label:"Danemark",phoneCode:"+45",flag:"\ud83c\udde9\ud83c\uddf0"},{value:"FI",label:"Finlande",phoneCode:"+358",flag:"\ud83c\uddeb\ud83c\uddee"}];let n=null,r=!1,s=null;const i=()=>{const[e,a]=(0,t.useState)((()=>n||o)),[l,i]=(0,t.useState)((()=>null===n)),[c,u]=(0,t.useState)((()=>null===n)),m=(0,t.useRef)(!1),d=(0,t.useRef)(!0);return(0,t.useEffect)((()=>{if(m.current)return;if(m.current=!0,n)return a(n),u(!1),void i(!1);const e=setTimeout((async()=>{if(d.current)try{const e=await(async()=>n||s||(s=new Promise((async e=>{try{r=!0;const a=new AbortController,l=setTimeout((()=>{a.abort()}),1e4),t=await fetch("https://restcountries.com/v3.1/all?fields=cca2,name,idd,flag,translations",{headers:{Accept:"application/json","User-Agent":"Mozilla/5.0 (compatible; Intelia/1.0)","Cache-Control":"no-cache"},signal:a.signal});if(clearTimeout(l),"Statut HTTP: ".concat(t.status," ").concat(t.statusText),!t.ok)throw new Error("API indisponible: ".concat(t.status));const o=await t.json();if("Donn\xe9es re\xe7ues: ".concat(o.length," pays bruts"),!Array.isArray(o))throw new Error("Format de donn\xe9es invalide");const s=o.map((e=>{var a,l,t,o;let n="";return(null===(a=e.idd)||void 0===a?void 0:a.root)&&(n=e.idd.root,e.idd.suffixes&&e.idd.suffixes[0]&&(n+=e.idd.suffixes[0])),{value:e.cca2,label:(null===(t=e.translations)||void 0===t||null===(l=t.fra)||void 0===l?void 0:l.common)||(null===(o=e.name)||void 0===o?void 0:o.common)||e.cca2,phoneCode:n,flag:e.flag||""}})).filter((e=>{const a=e.phoneCode&&"undefined"!==e.phoneCode&&"null"!==e.phoneCode&&e.phoneCode.length>1&&e.phoneCode.startsWith("+")&&/^\+\d+$/.test(e.phoneCode),l=e.value&&2===e.value.length&&e.label&&e.label.length>1;return a&&l})).sort(((e,a)=>e.label.localeCompare(a.label,"fr",{numeric:!0})));if("Pays valides apr\xe8s filtrage: ".concat(s.length),!(s.length>=50))throw"Pas assez de pays valides: ".concat(s.length,"/50"),new Error("Qualit\xe9 insuffisante: ".concat(s.length,"/50 pays"));n=s,e(s)}catch(a){n=o,e(o)}finally{r=!1,s=null}})),s))();d.current&&(a(e),u(e===o),i(!1))}catch(e){d.current&&(a(o),u(!0),i(!1))}}),100);return()=>{clearTimeout(e),d.current=!1}}),[]),(0,t.useEffect)((()=>()=>{d.current=!1}),[]),"Render - ".concat(e.length," pays, loading:").concat(l,", fallback:").concat(c),(0,t.useMemo)((()=>({countries:e,loading:l,usingFallback:c})),[e,l,c])},c=e=>(0,t.useMemo)((()=>{const a=e.reduce(((e,a)=>(e[a.value]=a.phoneCode,e)),{});return"Mapping cr\xe9\xe9 avec ".concat(Object.keys(a).length," entr\xe9es"),a}),[e]),u={STORAGE_KEY:"intelia-remember-me-persist",save:(e,a)=>{try{if(!a||!e.trim())return void localStorage.removeItem(u.STORAGE_KEY);const l={email:e.trim(),rememberMe:!0,timestamp:Date.now(),version:"1.0"};localStorage.setItem(u.STORAGE_KEY,JSON.stringify(l)),e.trim()}catch(l){}},load:()=>{try{const e=localStorage.getItem(u.STORAGE_KEY);if(!e)return{rememberMe:!1,lastEmail:""};const a=JSON.parse(e);if(!a.email||"boolean"!==typeof a.rememberMe)return localStorage.removeItem(u.STORAGE_KEY),{rememberMe:!1,lastEmail:""};const l=Date.now()-(a.timestamp||0);return l>2592e6?(localStorage.removeItem(u.STORAGE_KEY),{rememberMe:!1,lastEmail:""}):(a.email,a.rememberMe,Math.round(l/864e5),{rememberMe:a.rememberMe,lastEmail:a.email})}catch(e){try{localStorage.removeItem(u.STORAGE_KEY)}catch(a){}return{rememberMe:!1,lastEmail:""}}},clear:()=>{try{localStorage.removeItem(u.STORAGE_KEY)}catch(e){}},preserveOnLogout:()=>{const e=u.load();return e.rememberMe&&e.lastEmail?{email:e.lastEmail,rememberMe:!0}:null},restoreAfterLogout:e=>{e&&e.rememberMe&&(u.save(e.email,!0),e.email)}}}}]);
(()=>{var e={id:178,ids:[178]};e.modules={2885:e=>{"use strict";e.exports=require("@supabase/supabase-js")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},7012:(e,r,s)=>{"use strict";s.r(r),s.d(r,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>x,tree:()=>d});s(4591),s(6465),s(5866);var t=s(3191),a=s(8716),n=s(7922),i=s.n(n),l=s(5231),o={};for(const p in l)["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(p)<0&&(o[p]=()=>l[p]);s.d(r,o);const d=["",{children:["profile",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,4591)),"C:\\intelia_gpt\\intelia-expert\\frontend\\app\\profile\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,6465)),"C:\\intelia_gpt\\intelia-expert\\frontend\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\intelia_gpt\\intelia-expert\\frontend\\app\\profile\\page.tsx"],u="/profile/page",m={require:s,loadChunk:()=>Promise.resolve()},x=new t.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/profile/page",pathname:"/profile",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},9288:(e,r,s)=>{Promise.resolve().then(s.bind(s,9173))},9173:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>y});var t=s(326),a=s(7577),n=s(5047),i=s(799),l=s(434);const o=e=>{if(!e?.name)return"Utilisateur";const r=String(e.name).trim();return r.length>=2?r:"Utilisateur"},d=e=>e?.email?String(e.email):"",c=e=>{const r=e?.user_type;return"string"===typeof r&&r?r:"producer"},u=e=>{if(!e?.created_at)return null;try{const r=new Date(e.created_at);return isNaN(r.getTime())?null:r}catch{return null}},m=e=>{switch(e){case"professional":return"bg-blue-100 text-blue-800";case"producer":return"bg-green-100 text-green-800";case"super_admin":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},x=e=>{switch(e){case"professional":return"Professionnel";case"producer":return"Producteur";case"super_admin":return"Super Admin";default:return"Utilisateur"}},p=({className:e})=>t.jsx("svg",{className:e,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z"})}),h=({className:e})=>(0,t.jsxs)("svg",{className:e,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:[t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.324.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.24-.438.613-.431.992a6.759 6.759 0 010 .255c-.007.378.138.75.43.99l1.005.828c.424.35.534.954.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.57 6.57 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 01-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 01-1.369-.49l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.43-.992a6.932 6.932 0 010-.255c.007-.378-.138-.75-.43-.99l-1.004-.828a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281z"}),t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),g=({className:e})=>t.jsx("svg",{className:e,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75m-3-7.036A11.959 11.959 0 013.598 6 11.99 11.99 0 003 9.749c0 5.592 3.824 10.29 9 11.623 5.176-1.332 9-6.03 9-11.623 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.285z"})}),b=({className:e})=>t.jsx("svg",{className:e,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5L3 12m0 0l7.5-7.5M3 12h18"})}),f=e=>{if(!e||"string"!==typeof e)return"U";const r=e.trim();return 0===r.length?"U":r.split(" ").map((e=>e[0])).join("").toUpperCase().slice(0,2)||"U"};function j(){const e=(0,n.useRouter)(),{user:r,isLoading:s}=((0,n.useSearchParams)(),(0,i.useAuthStore)()),{updateProfile:j,exportUserData:y,deleteUserData:v}=(0,i.useAuthStore)(),[N,w]=(0,a.useState)("profile"),[k,P]=(0,a.useState)({fullName:"",email:"",userType:"producer"}),[C,S]=(0,a.useState)(""),[_,L]=(0,a.useState)(""),[T,E]=(0,a.useState)(!1),U=e=>{const{name:r,value:s}=e.target;P((e=>({...e,[r]:s}))),S(""),L("")};if(!r)return t.jsx("div",{className:"min-h-screen flex items-center justify-center",children:t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})});const M=o(r),R=d(r),q=c(r),A=u(r),z=f(M),D=[{id:"profile",label:"Profil",icon:p},{id:"settings",label:"Param\xe8tres",icon:h},{id:"privacy",label:"Confidentialit\xe9",icon:g}];return(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[t.jsx("div",{className:"bg-white shadow-sm border-b",children:t.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:t.jsx("div",{className:"flex items-center justify-between h-16",children:(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsxs)(l.default,{href:"/chat",className:"flex items-center text-gray-600 hover:text-gray-900 transition-colors",children:[t.jsx(b,{className:"w-5 h-5 mr-2"}),"Retour au chat"]}),t.jsx("div",{className:"h-6 w-px bg-gray-300"}),t.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Mon profil"})]})})})}),t.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[t.jsx("div",{className:"px-6 py-8 border-b border-gray-200",children:(0,t.jsxs)("div",{className:"flex items-center space-x-6",children:[t.jsx("div",{className:"w-20 h-20 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white font-bold text-2xl",children:z}),(0,t.jsxs)("div",{children:[t.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:M}),t.jsx("p",{className:"text-gray-600",children:R}),t.jsx("div",{className:`inline-block px-3 py-1 rounded-full text-sm font-medium mt-2 ${m(q)}`,children:x(q)})]})]})}),t.jsx("div",{className:"border-b border-gray-200",children:t.jsx("nav",{className:"flex space-x-8 px-6",children:D.map((e=>t.jsx("button",{onClick:()=>w(e.id),className:"py-4 px-1 border-b-2 font-medium text-sm transition-colors "+(N===e.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[t.jsx(e.icon,{className:"w-4 h-4"}),t.jsx("span",{children:e.label})]})},e.id)))})}),(0,t.jsxs)("div",{className:"p-6",children:[C&&t.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 text-red-700 rounded-lg",children:C}),_&&t.jsx("div",{className:"mb-6 p-4 bg-green-50 border border-green-200 text-green-700 rounded-lg",children:_}),"profile"===N&&t.jsx("div",{className:"space-y-6",children:(0,t.jsxs)("div",{children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Informations personnelles"}),(0,t.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),S(""),L("");const r=k.fullName.trim();if(!r||r.length<2)S("Le nom complet doit contenir au moins 2 caract\xe8res");else if(["producer","professional"].includes(k.userType))try{const e={name:r,user_type:k.userType};await j(e),L("Profil mis \xe0 jour avec succ\xe8s")}catch(C){S(C.message||"Erreur lors de la mise \xe0 jour")}else S("Type de compte invalide")},className:"space-y-4",children:[(0,t.jsxs)("div",{children:[t.jsx("label",{htmlFor:"fullName",className:"block text-sm font-medium text-gray-700 mb-2",children:"Nom complet"}),t.jsx("input",{type:"text",id:"fullName",name:"fullName",value:k.fullName||"",onChange:U,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),t.jsx("input",{type:"email",id:"email",name:"email",value:k.email||"",className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50",disabled:!0}),t.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"L'email ne peut pas \xeatre modifi\xe9 pour des raisons de s\xe9curit\xe9"})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{htmlFor:"userType",className:"block text-sm font-medium text-gray-700 mb-2",children:"Type de compte"}),(0,t.jsxs)("select",{id:"userType",name:"userType",value:k.userType,onChange:U,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[t.jsx("option",{value:"producer",children:"Producteur agricole"}),t.jsx("option",{value:"professional",children:"Professionnel sant\xe9 animale"})]})]}),t.jsx("button",{type:"submit",disabled:s,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors",children:s?"Enregistrement...":"Enregistrer les modifications"})]})]})}),"settings"===N&&t.jsx("div",{className:"space-y-6",children:(0,t.jsxs)("div",{children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Param\xe8tres du compte"}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[(0,t.jsxs)("div",{children:[t.jsx("h4",{className:"font-medium text-gray-900",children:"Langue de l'interface"}),t.jsx("p",{className:"text-sm text-gray-500",children:"Choisissez votre langue pr\xe9f\xe9r\xe9e"})]}),(0,t.jsxs)("select",{className:"px-3 py-2 border border-gray-300 rounded-lg",children:[t.jsx("option",{value:"fr",children:"Fran\xe7ais"}),t.jsx("option",{value:"en",children:"English"}),t.jsx("option",{value:"es",children:"Espa\xf1ol"})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[(0,t.jsxs)("div",{children:[t.jsx("h4",{className:"font-medium text-gray-900",children:"Notifications"}),t.jsx("p",{className:"text-sm text-gray-500",children:"Recevoir des notifications par email"})]}),t.jsx("input",{type:"checkbox",className:"w-4 h-4 text-blue-600 rounded"})]})]})]})}),"privacy"===N&&t.jsx("div",{className:"space-y-6",children:(0,t.jsxs)("div",{children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Gestion des donn\xe9es"}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"p-4 border border-gray-200 rounded-lg",children:[t.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Exporter mes donn\xe9es"}),t.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"T\xe9l\xe9chargez toutes vos donn\xe9es personnelles au format JSON."}),t.jsx("button",{onClick:async()=>{try{const e=await y(),r=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),s=URL.createObjectURL(r),t=document.createElement("a");t.href=s,t.download=`intelia-expert-data-${(new Date).toISOString().split("T")[0]}.json`,document.body.appendChild(t),t.click(),document.body.removeChild(t),URL.revokeObjectURL(s),L("Donn\xe9es export\xe9es avec succ\xe8s")}catch(C){S(C.message||"Erreur lors de l'export")}},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"T\xe9l\xe9charger mes donn\xe9es"})]}),(0,t.jsxs)("div",{className:"p-4 border border-red-200 rounded-lg bg-red-50",children:[t.jsx("h4",{className:"font-medium text-red-900 mb-2",children:"Supprimer mon compte"}),t.jsx("p",{className:"text-sm text-red-700 mb-4",children:"Cette action est irr\xe9versible. Toutes vos donn\xe9es seront d\xe9finitivement supprim\xe9es."}),T?(0,t.jsxs)("div",{className:"space-y-3",children:[t.jsx("p",{className:"text-sm font-medium text-red-800",children:"\xcates-vous vraiment s\xfbr ? Cette action ne peut pas \xeatre annul\xe9e."}),(0,t.jsxs)("div",{className:"flex space-x-3",children:[t.jsx("button",{onClick:()=>E(!1),className:"bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition-colors",children:"Annuler"}),t.jsx("button",{onClick:async()=>{if(T)try{await v(),e.push("/")}catch(C){S(C.message||"Erreur lors de la suppression"),E(!1)}else E(!0)},disabled:s,className:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 disabled:opacity-50 transition-colors",children:s?"Suppression...":"Oui, supprimer d\xe9finitivement"})]})]}):t.jsx("button",{onClick:()=>E(!0),className:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors",children:"Supprimer mon compte"})]}),(0,t.jsxs)("div",{className:"p-4 border border-gray-200 rounded-lg",children:[t.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Politique de conservation"}),(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:["Vos donn\xe9es de conversation sont automatiquement supprim\xe9es apr\xe8s 30 jours. Membre depuis : ",A?A.toLocaleDateString("fr-FR"):"N/A"]})]})]})]})})]})]})})]})}function y(){return t.jsx(a.Suspense,{fallback:t.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),t.jsx("p",{className:"text-gray-600",children:"Chargement du profil..."})]})}),children:t.jsx(j,{})})}},5047:(e,r,s)=>{"use strict";var t=s(7389);s.o(t,"usePathname")&&s.d(r,{usePathname:function(){return t.usePathname}}),s.o(t,"useRouter")&&s.d(r,{useRouter:function(){return t.useRouter}}),s.o(t,"useSearchParams")&&s.d(r,{useSearchParams:function(){return t.useSearchParams}})},4591:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>t});const t=(0,s(8570).createProxy)(String.raw`C:\intelia_gpt\intelia-expert\frontend\app\profile\page.tsx#default`)}};var r=require("../../webpack-runtime.js");r.C(e);var s=r.X(0,[393,737,434,190],(()=>{return e=7012,r(r.s=e);var e}));module.exports=s})();
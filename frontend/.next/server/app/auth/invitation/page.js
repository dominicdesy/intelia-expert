(()=>{var e={id:221,ids:[221]};e.modules={2885:e=>{"use strict";e.exports=require("@supabase/supabase-js")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},3478:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>o.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>c,routeModule:()=>p,tree:()=>d});t(1411),t(6465),t(5866);var a=t(3191),r=t(8716),n=t(7922),o=t.n(n),l=t(5231),i={};for(const x in l)["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(x)<0&&(i[x]=()=>l[x]);t.d(s,i);const d=["",{children:["auth",{children:["invitation",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,1411)),"C:\\intelia_gpt\\intelia-expert\\frontend\\app\\auth\\invitation\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,6465)),"C:\\intelia_gpt\\intelia-expert\\frontend\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,5866,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\intelia_gpt\\intelia-expert\\frontend\\app\\auth\\invitation\\page.tsx"],m="/auth/invitation/page",u={require:t,loadChunk:()=>Promise.resolve()},p=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/auth/invitation/page",pathname:"/auth/invitation",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},9991:(e,s,t)=>{Promise.resolve().then(t.bind(t,3267))},3267:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>h});var a=t(326),r=t(7577),n=t.n(r),o=t(5047),l=t(6007);const i=[{value:"CA",label:"Canada",phoneCode:"+1",flag:"\ud83c\udde8\ud83c\udde6"},{value:"US",label:"\xc9tats-Unis",phoneCode:"+1",flag:"\ud83c\uddfa\ud83c\uddf8"},{value:"FR",label:"France",phoneCode:"+33",flag:"\ud83c\uddeb\ud83c\uddf7"},{value:"GB",label:"Royaume-Uni",phoneCode:"+44",flag:"\ud83c\uddec\ud83c\udde7"},{value:"DE",label:"Allemagne",phoneCode:"+49",flag:"\ud83c\udde9\ud83c\uddea"},{value:"IT",label:"Italie",phoneCode:"+39",flag:"\ud83c\uddee\ud83c\uddf9"},{value:"ES",label:"Espagne",phoneCode:"+34",flag:"\ud83c\uddea\ud83c\uddf8"},{value:"BE",label:"Belgique",phoneCode:"+32",flag:"\ud83c\udde7\ud83c\uddea"},{value:"CH",label:"Suisse",phoneCode:"+41",flag:"\ud83c\udde8\ud83c\udded"},{value:"MX",label:"Mexique",phoneCode:"+52",flag:"\ud83c\uddf2\ud83c\uddfd"},{value:"BR",label:"Br\xe9sil",phoneCode:"+55",flag:"\ud83c\udde7\ud83c\uddf7"},{value:"AU",label:"Australie",phoneCode:"+61",flag:"\ud83c\udde6\ud83c\uddfa"},{value:"JP",label:"Japon",phoneCode:"+81",flag:"\ud83c\uddef\ud83c\uddf5"},{value:"CN",label:"Chine",phoneCode:"+86",flag:"\ud83c\udde8\ud83c\uddf3"},{value:"IN",label:"Inde",phoneCode:"+91",flag:"\ud83c\uddee\ud83c\uddf3"},{value:"NL",label:"Pays-Bas",phoneCode:"+31",flag:"\ud83c\uddf3\ud83c\uddf1"},{value:"SE",label:"Su\xe8de",phoneCode:"+46",flag:"\ud83c\uddf8\ud83c\uddea"},{value:"NO",label:"Norv\xe8ge",phoneCode:"+47",flag:"\ud83c\uddf3\ud83c\uddf4"},{value:"DK",label:"Danemark",phoneCode:"+45",flag:"\ud83c\udde9\ud83c\uddf0"},{value:"FI",label:"Finlande",phoneCode:"+358",flag:"\ud83c\uddeb\ud83c\uddee"}],d=()=>{const{currentLanguage:e}=(0,l.$G)(),s=(e=>({fr:"fra",es:"spa",de:"deu",pt:"por",nl:"nld",pl:"pol",zh:"zho",hi:"hin",th:"tha",en:"eng"}[e]||"eng"))(e),[t,a]=(0,r.useState)(i),[n,o]=(0,r.useState)(!0),[d,c]=(0,r.useState)(!1);return(0,r.useEffect)((()=>{const t=setTimeout((async()=>{try{console.log(`[Countries] Tentative de chargement via API REST Countries en ${e} (${s})...`);const t=await fetch("https://restcountries.com/v3.1/all?fields=cca2,name,idd,flag,translations",{headers:{Accept:"application/json"}});if(!t.ok)throw new Error(`API Error: ${t.status} ${t.statusText}`);const r=await t.json();console.log("[Countries] Donn\xe9es re\xe7ues:",r.length,"pays");const n=r.map((e=>{const t=e.idd?.root+(e.idd?.suffixes?.[0]||"");let a=e.name?.common||e.cca2;return e.translations&&e.translations[s]?a=e.translations[s].common||e.translations[s].official:e.name?.common&&(a=e.name.common),{value:e.cca2,label:a,phoneCode:t,flag:e.flag}})).filter((e=>e.phoneCode&&"undefined"!==e.phoneCode&&"null"!==e.phoneCode&&e.phoneCode.length>1&&e.phoneCode.startsWith("+")&&e.value&&e.label)).sort(((e,t)=>{const a="fra"===s?"fr":"spa"===s?"es":"deu"===s?"de":"por"===s?"pt":"nld"===s?"nl":"pol"===s?"pl":"zho"===s?"zh":"en";return e.label.localeCompare(t.label,a,{numeric:!0})}));if(!(n.length>=50))throw new Error("Donn\xe9es insuffisantes");a(n),c(!1),console.log(`[Countries] API REST Countries utilis\xe9e avec succ\xe8s en ${e}`)}catch(t){console.warn("[Countries] API REST Countries bloqu\xe9e, utilisation du fallback:",t),a(i),c(!0)}finally{o(!1)}}),100);return()=>clearTimeout(t)}),[e,s]),{countries:t,loading:n,usingFallback:d}},c=(e,s)=>{const t=[];return e.length<8&&t.push(s("validation.password.minLength")),/[A-Z]/.test(e)||t.push(s("validation.password.uppercase")),/[a-z]/.test(e)||t.push(s("validation.password.lowercase")),/\d/.test(e)||t.push(s("validation.password.number")),/[!@#$%^&*(),.?":{}|<>]/.test(e)||t.push(s("validation.password.special")),t},m=(e,s,t,a,r)=>{if(!e.trim()&&!s.trim()&&!t.trim())return!0;if(e.trim()&&!s.trim()&&!t.trim()&&a&&r[a]===e.trim())return!0;if(s.trim()||t.trim()){if(!e.trim()||!s.trim()||!t.trim())return!1;if(!/^\+[1-9]\d{0,3}$/.test(e.trim()))return!1;if(!/^\d{3}$/.test(s.trim()))return!1;if(!/^\d{7}$/.test(t.trim()))return!1}return!0},u=({className:e="w-12 h-12"})=>a.jsx("img",{src:"/images/favicon.png",alt:"Intelia Logo",className:e}),p=({result:e})=>{const{t:s}=(0,l.$G)();return(0,a.jsxs)("div",{className:"text-center",children:[e.success?a.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx("svg",{className:"w-6 h-6 text-green-600",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}):a.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m9-.75a9 9 0 11-18 0 9 9 0 0118 0zm-9 3.75h.008v.008H12v-.008z"})})}),a.jsx("h2",{className:"text-lg font-semibold mb-4 "+(e.success?"text-green-900":"text-red-900"),children:(()=>{switch(e.step){case"validation":return e.success?s("invitation.status.tokenValidated"):s("invitation.status.tokenError");case"completion":return e.success?s("invitation.status.accountCreated"):s("invitation.status.accountError");default:return s("invitation.status.processing")}})()}),a.jsx("div",{className:"text-sm mb-4 "+(e.success?"text-green-700":"text-red-700"),children:e.message}),e.success&&"completion"===e.step&&(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:[a.jsx("p",{children:s("invitation.redirecting.dashboard")}),a.jsx("div",{className:"mt-2",children:a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:"bg-green-600 h-2 rounded-full animate-pulse",style:{width:"100%"}})})})]}),!e.success&&a.jsx("div",{className:"text-xs text-gray-600",children:s("invitation.redirecting.login")})]})};function x(){const{t:e}=(0,l.$G)(),s=(0,o.useRouter)(),[t,n]=((0,o.useSearchParams)(),(0,r.useState)("loading")),[i,x]=(0,r.useState)(""),[h,b]=(0,r.useState)(null),[g,f]=(0,r.useState)(!1),[v,j]=(0,r.useState)(!1),[N,y]=(0,r.useState)(null),{countries:w,loading:k,usingFallback:C}=d(),P=(0,r.useMemo)((()=>w.reduce(((e,s)=>(e[s.value]=s.phoneCode,e)),{})),[w]),[L,S]=(0,r.useState)({password:"",confirmPassword:"",firstName:"",lastName:"",linkedinProfile:"",email:"",country:"",countryCode:"",areaCode:"",phoneNumber:"",companyName:"",companyWebsite:"",companyLinkedin:"",jobTitle:""}),[q,A]=(0,r.useState)([]),[E,$]=(0,r.useState)(!1),[M,_]=(0,r.useState)(!1),I=(e,s)=>{S((t=>{const a={...t,[e]:s};return"country"===e&&s&&P[s]&&(a.countryCode=P[s],a.areaCode="",a.phoneNumber=""),a})),q.length>0&&A([])};return(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-green-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[(0,a.jsxs)("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[a.jsx("div",{className:"flex justify-center mb-8",children:a.jsx(u,{className:"w-16 h-16"})}),a.jsx("h1",{className:"text-center text-3xl font-bold text-gray-900 mb-2",children:e("common.appName")}),a.jsx("p",{className:"text-center text-sm text-gray-600 mb-8",children:e("set-password"===t?"invitation.completeProfile":"invitation.finalizingInvitation")})]}),a.jsx("div",{className:"sm:mx-auto sm:w-full sm:max-w-2xl",children:(0,a.jsxs)("div",{className:"bg-white py-8 px-4 shadow-lg sm:rounded-lg sm:px-10",children:["loading"===t&&(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("div",{className:"w-12 h-12 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-2",children:e("invitation.processing")}),a.jsx("p",{className:"text-sm text-gray-600",children:i||e("invitation.validating")}),(0,a.jsxs)("div",{className:"mt-4 text-xs text-gray-400",children:[a.jsx("p",{children:e("invitation.backendValidation")}),a.jsx("p",{children:e("invitation.waitMessage")})]}),N&&"validation"===N.step&&a.jsx("div",{className:"mt-6",children:a.jsx(p,{result:N})})]}),"set-password"===t&&(0,a.jsxs)("div",{children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4 text-center",children:e("invitation.welcomeComplete")}),h&&(0,a.jsxs)("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[a.jsx("h3",{className:"font-medium text-blue-900 mb-2",children:e("invitation.validatedSuccess")}),(0,a.jsxs)("div",{className:"text-sm text-blue-800 space-y-1",children:[(0,a.jsxs)("p",{children:[(0,a.jsxs)("strong",{children:[e("profile.email"),":"]})," ",h.email]}),h.inviterName&&(0,a.jsxs)("p",{children:[(0,a.jsxs)("strong",{children:[e("invitation.invitedBy"),":"]})," ",h.inviterName]}),h.personalMessage&&(0,a.jsxs)("div",{className:"mt-2 p-2 bg-white rounded border",children:[(0,a.jsxs)("p",{className:"text-xs text-gray-600 mb-1",children:[e("invitation.personalMessage"),":"]}),(0,a.jsxs)("p",{className:"text-sm italic",children:['"',h.personalMessage,'"']})]})]})]}),C&&!k&&a.jsx("div",{className:"mb-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("svg",{className:"w-4 h-4 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16c-.77.833.192 2.5 1.732 2.5z"})}),a.jsx("span",{className:"text-sm text-yellow-800",children:e("countries.limitedList")})]})}),q.length>0&&a.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-lg p-3",children:(0,a.jsxs)("div",{className:"flex",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),(0,a.jsxs)("div",{className:"ml-3",children:[a.jsx("h3",{className:"text-sm font-medium text-red-800",children:e("validation.correctErrors")}),a.jsx("div",{className:"mt-1 text-sm text-red-700",children:q.map(((e,s)=>(0,a.jsxs)("div",{className:"flex items-start space-x-2",children:[a.jsx("span",{className:"text-red-500 font-bold",children:"\u2022"}),a.jsx("span",{children:e})]},s)))})]})]})}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"border-b border-gray-200 pb-6",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:e("profile.personalInfo")}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:[e("profile.firstName")," ",a.jsx("span",{className:"text-red-500",children:e("form.required")})]}),a.jsx("input",{type:"text",required:!0,value:L.firstName,onChange:e=>I("firstName",e.target.value),placeholder:e("placeholder.firstName"),className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-blue-500 sm:text-sm",disabled:g})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:[e("profile.lastName")," ",a.jsx("span",{className:"text-red-500",children:e("form.required")})]}),a.jsx("input",{type:"text",required:!0,value:L.lastName,onChange:e=>I("lastName",e.target.value),placeholder:e("placeholder.lastName"),className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-blue-500 sm:text-sm",disabled:g})]})]}),(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:[e("profile.linkedinProfile")," ",e("common.optional")]}),a.jsx("input",{type:"url",value:L.linkedinProfile,onChange:e=>I("linkedinProfile",e.target.value),placeholder:e("placeholder.linkedinPersonal"),className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-blue-500 sm:text-sm",disabled:g})]})]}),(0,a.jsxs)("div",{className:"border-b border-gray-200 pb-6",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:e("profile.contact")}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:[e("profile.email")," ",a.jsx("span",{className:"text-red-500",children:e("form.required")})]}),a.jsx("input",{type:"email",required:!0,value:L.email,onChange:e=>I("email",e.target.value),placeholder:e("placeholder.email"),className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-blue-500 sm:text-sm bg-gray-50",disabled:!0,readOnly:!0}),a.jsx("p",{className:"mt-1 text-xs text-gray-500",children:e("invitation.emailFromInvitation")})]}),(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:[e("profile.country")," ",a.jsx("span",{className:"text-red-500",children:e("form.required")})]}),k?a.jsx("div",{className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 bg-gray-50",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-4 h-4 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"}),a.jsx("span",{className:"text-sm text-gray-600",children:e("countries.loading")})]})}):(0,a.jsxs)("select",{required:!0,value:L.country,onChange:e=>I("country",e.target.value),className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-blue-500 sm:text-sm",disabled:g,children:[a.jsx("option",{value:"",children:e("placeholder.countrySelect")}),w.map((e=>(0,a.jsxs)("option",{value:e.value,children:[e.flag," ",e.label]},e.value)))]})]}),(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e("profile.phone")," ",e("common.optional")]}),a.jsx("p",{className:"text-xs text-gray-500 mb-2",children:e("invitation.phoneAutoFill")}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-2",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:e("profile.countryCode")}),a.jsx("input",{type:"text",placeholder:"+1",value:L.countryCode,onChange:e=>I("countryCode",e.target.value),className:"block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-blue-500 sm:text-sm bg-gray-50",disabled:g,readOnly:!0})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:e("profile.areaCode")}),a.jsx("input",{type:"text",placeholder:"514",value:L.areaCode,onChange:e=>I("areaCode",e.target.value),className:"block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-blue-500 sm:text-sm",disabled:g})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:e("profile.phoneNumber")}),a.jsx("input",{type:"text",placeholder:"1234567",value:L.phoneNumber,onChange:e=>I("phoneNumber",e.target.value),className:"block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-blue-500 sm:text-sm",disabled:g})]})]})]})]}),(0,a.jsxs)("div",{className:"border-b border-gray-200 pb-6",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:e("profile.company")}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:[e("profile.companyName")," ",e("common.optional")]}),a.jsx("input",{type:"text",value:L.companyName,onChange:e=>I("companyName",e.target.value),placeholder:e("placeholder.companyName"),className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-blue-500 sm:text-sm",disabled:g})]}),(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:[e("profile.companyWebsite")," ",e("common.optional")]}),a.jsx("input",{type:"url",value:L.companyWebsite,onChange:e=>I("companyWebsite",e.target.value),placeholder:e("placeholder.companyWebsite"),className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-blue-500 sm:text-sm",disabled:g})]}),(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:[e("profile.companyLinkedin")," ",e("common.optional")]}),a.jsx("input",{type:"url",value:L.companyLinkedin,onChange:e=>I("companyLinkedin",e.target.value),placeholder:e("placeholder.linkedinCorporate"),className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-blue-500 sm:text-sm",disabled:g})]}),(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:[e("profile.jobTitle")," ",e("common.optional")]}),a.jsx("input",{type:"text",value:L.jobTitle,onChange:e=>I("jobTitle",e.target.value),placeholder:e("placeholder.jobTitle"),className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-blue-500 sm:text-sm",disabled:g})]})]}),(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:e("profile.security")}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:[e("profile.password")," ",a.jsx("span",{className:"text-red-500",children:e("form.required")})]}),(0,a.jsxs)("div",{className:"mt-1 relative",children:[a.jsx("input",{type:E?"text":"password",required:!0,value:L.password,onChange:e=>I("password",e.target.value),className:"block w-full rounded-md border border-gray-300 px-3 py-2 pr-10 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-blue-500 sm:text-sm",disabled:g}),a.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>$(!E),disabled:g,children:E?a.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L3 3m6.878 6.878L21 21"})}):(0,a.jsxs)("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]}),L.password&&(0,a.jsxs)("div",{className:"mt-3 bg-gray-50 rounded-lg p-3",children:[(0,a.jsxs)("h5",{className:"text-sm font-medium text-gray-900 mb-2",children:[e("validation.password.requirements"),":"]}),(0,a.jsxs)("ul",{className:"text-xs text-gray-600 space-y-1",children:[(0,a.jsxs)("li",{className:"flex items-center space-x-2",children:[a.jsx("span",{className:L.password.length>=8?"text-green-600":"text-gray-400",children:L.password.length>=8?"\u2713":"\u25cb"}),a.jsx("span",{children:e("validation.password.minLength")})]}),(0,a.jsxs)("li",{className:"flex items-center space-x-2",children:[a.jsx("span",{className:/[A-Z]/.test(L.password)?"text-green-600":"text-gray-400",children:/[A-Z]/.test(L.password)?"\u2713":"\u25cb"}),a.jsx("span",{children:e("validation.password.uppercase")})]}),(0,a.jsxs)("li",{className:"flex items-center space-x-2",children:[a.jsx("span",{className:/[a-z]/.test(L.password)?"text-green-600":"text-gray-400",children:/[a-z]/.test(L.password)?"\u2713":"\u25cb"}),a.jsx("span",{children:e("validation.password.lowercase")})]}),(0,a.jsxs)("li",{className:"flex items-center space-x-2",children:[a.jsx("span",{className:/\d/.test(L.password)?"text-green-600":"text-gray-400",children:/\d/.test(L.password)?"\u2713":"\u25cb"}),a.jsx("span",{children:e("validation.password.number")})]}),(0,a.jsxs)("li",{className:"flex items-center space-x-2",children:[a.jsx("span",{className:/[!@#$%^&*(),.?":{}|<>]/.test(L.password)?"text-green-600":"text-gray-400",children:/[!@#$%^&*(),.?":{}|<>]/.test(L.password)?"\u2713":"\u25cb"}),a.jsx("span",{children:e("validation.password.special")})]})]})]})]}),(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:[e("profile.confirmPassword")," ",a.jsx("span",{className:"text-red-500",children:e("form.required")})]}),(0,a.jsxs)("div",{className:"mt-1 relative",children:[a.jsx("input",{type:M?"text":"password",required:!0,value:L.confirmPassword,onChange:e=>I("confirmPassword",e.target.value),className:"block w-full rounded-md border border-gray-300 px-3 py-2 pr-10 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-blue-500 sm:text-sm",disabled:g}),a.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>_(!M),disabled:g,children:M?a.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L3 3m6.878 6.878L21 21"})}):(0,a.jsxs)("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]})]}),L.password&&L.confirmPassword&&a.jsx("div",{className:"mt-2 text-xs",children:L.confirmPassword===L.password?(0,a.jsxs)("span",{className:"text-green-600 flex items-center",children:[a.jsx("svg",{className:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),e("validation.password.match")]}):(0,a.jsxs)("span",{className:"text-red-600 flex items-center",children:[a.jsx("svg",{className:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),e("validation.password.mismatch")]})})]}),a.jsx("button",{type:"button",onClick:async()=>{console.log("[InvitationAccept] D\xe9but handleFormSubmit");const t=(()=>{const s=[];if(L.password){const t=c(L.password,e);s.push(...t)}else s.push(e("validation.required.password"));if(L.confirmPassword||s.push(e("validation.required.confirmPassword")),L.password!==L.confirmPassword&&s.push(e("validation.password.mismatch")),L.firstName.trim()||s.push(e("validation.required.firstName")),L.lastName.trim()||s.push(e("validation.required.lastName")),L.email.trim()||s.push(e("validation.required.email")),L.country||s.push(e("validation.required.country")),!m(L.countryCode,L.areaCode,L.phoneNumber,L.country,P)&&(L.areaCode.trim()||L.phoneNumber.trim())){const t=[];L.countryCode.trim()||t.push(e("profile.countryCode")),L.areaCode.trim()||t.push(e("profile.areaCode")),L.phoneNumber.trim()||t.push(e("profile.phoneNumber")),t.length>0?s.push(`${e("validation.phone.incomplete")}: ${t.join(", ")}`):s.push(e("validation.phone.invalid"))}return s})();if(t.length>0)return console.log("[InvitationAccept] Erreurs de validation:",t),void A(t);console.log("[InvitationAccept] Validation formulaire pass\xe9e"),f(!0),A([]);try{if(console.log("[InvitationAccept] Finalisation du compte via backend..."),!h?.accessToken)throw new Error(e("invitation.errors.missingAccessToken"));const t={access_token:h.accessToken,fullName:`${L.firstName.trim()} ${L.lastName.trim()}`,firstName:L.firstName.trim(),lastName:L.lastName.trim(),email:L.email.trim(),linkedinProfile:L.linkedinProfile.trim()||null,country:L.country,phone:L.countryCode&&L.areaCode&&L.phoneNumber?`${L.countryCode} ${L.areaCode}-${L.phoneNumber}`:null,company:L.companyName.trim()||e("common.notSpecified"),companyName:L.companyName.trim()||null,companyWebsite:L.companyWebsite.trim()||null,companyLinkedin:L.companyLinkedin.trim()||null,jobTitle:L.jobTitle.trim()||e("common.notSpecified"),password:L.password},r=[];if(t.firstName||r.push(e("validation.required.firstName")),t.lastName||r.push(e("validation.required.lastName")),t.fullName||r.push(e("validation.required.fullName")),t.email||r.push(e("validation.required.email")),t.country||r.push(e("validation.required.country")),t.password||r.push(e("validation.required.password")),t.access_token||r.push(e("validation.required.accessToken")),r.length>0)throw console.error("[InvitationAccept] Erreurs validation client:",r),new Error(e("validation.invalidData")+": "+r.join(", "));const o=process.env.NEXT_PUBLIC_API_URL||process.env.NEXT_PUBLIC_API_BASE_URL,l=await fetch(`${o}/v1/auth/invitations/complete-profile`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!l.ok){let s;const t=l.headers.get("content-type");try{if(t&&t.includes("application/json"))s=await l.json();else{const e=await l.text();s={detail:e,rawResponse:e}}}catch(a){console.error("[InvitationAccept] Erreur parsing r\xe9ponse:",a),s={detail:`${e("error.generic")} ${l.status}: ${l.statusText}`}}let r=e("invitation.errors.profileCompletion");throw s.detail&&(Array.isArray(s.detail)?r=s.detail.map((e=>"string"===typeof e?e:e.msg?`${e.loc?e.loc.join(".")+": ":""}${e.msg}`:e.message?e.message:JSON.stringify(e))).join(", "):"string"===typeof s.detail?r=s.detail:"object"===typeof s.detail&&(r=s.detail.message||JSON.stringify(s.detail))),y({success:!1,step:"completion",message:r,details:s}),new Error(r)}const i=await l.json();console.log("[InvitationAccept] Profil finalis\xe9 avec succ\xe8s:",i),n("success"),x(e("invitation.success.accountCreated")),y({success:!0,step:"completion",message:`${e("invitation.success.welcome")}, ${L.firstName}`}),setTimeout((()=>{console.log("[InvitationAccept] Redirection vers chat"),s.push(i.redirect_url||"/chat")}),2e3)}catch(r){console.error("[InvitationAccept] Erreur finalisation compte:",r);let s=e("invitation.errors.accountCompletion");r instanceof Error?s=r.message:"string"===typeof r?s=r:r&&"object"===typeof r&&(s=r.message||r.detail||JSON.stringify(r)),A([s])}finally{f(!1)}},disabled:g||!(L.password&&L.confirmPassword&&L.password===L.confirmPassword&&0===c(L.password,e).length&&L.firstName.trim()&&L.lastName.trim()&&L.email.trim()&&L.country&&m(L.countryCode,L.areaCode,L.phoneNumber,L.country,P)),className:"w-full py-3 px-4 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 focus:ring-4 focus:ring-blue-200 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:g?(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[a.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),a.jsx("span",{children:e("invitation.creatingAccount")})]}):e("invitation.createAccount")})]})]}),("success"===t||"error"===t)&&N&&a.jsx(p,{result:N}),a.jsx("div",{className:"mt-8 pt-4 border-t border-gray-200",children:(0,a.jsxs)("p",{className:"text-xs text-gray-500 text-center",children:[e("invitation.needHelp")," ",e("contact.supportEmail")]})})]})})]})}function h(){const{t:e}=(0,l.$G)();return a.jsx(n().Suspense,{fallback:a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-green-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx(u,{className:"w-16 h-16 mx-auto mb-4"}),a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:e("invitation.loadingInvitation")})]})}),children:a.jsx(x,{})})}},5047:(e,s,t)=>{"use strict";var a=t(7389);t.o(a,"usePathname")&&t.d(s,{usePathname:function(){return a.usePathname}}),t.o(a,"useRouter")&&t.d(s,{useRouter:function(){return a.useRouter}}),t.o(a,"useSearchParams")&&t.d(s,{useSearchParams:function(){return a.useSearchParams}})},1411:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>a});const a=(0,t(8570).createProxy)(String.raw`C:\intelia_gpt\intelia-expert\frontend\app\auth\invitation\page.tsx#default`)}};var s=require("../../../webpack-runtime.js");s.C(e);var t=s.X(0,[393,737,190],(()=>{return e=3478,s(s.s=e);var e}));module.exports=t})();
"use strict";exports.id=239,exports.ids=[239],exports.modules={4239:(e,l,a)=>{a.d(l,{FE:()=>i,aC:()=>u,rememberMeUtils:()=>m});var t=a(7577);const o=[{value:"CA",label:"Canada",phoneCode:"+1",flag:"\ud83c\udde8\ud83c\udde6"},{value:"US",label:"\xc9tats-Unis",phoneCode:"+1",flag:"\ud83c\uddfa\ud83c\uddf8"},{value:"FR",label:"France",phoneCode:"+33",flag:"\ud83c\uddeb\ud83c\uddf7"},{value:"GB",label:"Royaume-Uni",phoneCode:"+44",flag:"\ud83c\uddec\ud83c\udde7"},{value:"DE",label:"Allemagne",phoneCode:"+49",flag:"\ud83c\udde9\ud83c\uddea"},{value:"IT",label:"Italie",phoneCode:"+39",flag:"\ud83c\uddee\ud83c\uddf9"},{value:"ES",label:"Espagne",phoneCode:"+34",flag:"\ud83c\uddea\ud83c\uddf8"},{value:"BE",label:"Belgique",phoneCode:"+32",flag:"\ud83c\udde7\ud83c\uddea"},{value:"CH",label:"Suisse",phoneCode:"+41",flag:"\ud83c\udde8\ud83c\udded"},{value:"MX",label:"Mexique",phoneCode:"+52",flag:"\ud83c\uddf2\ud83c\uddfd"},{value:"BR",label:"Br\xe9sil",phoneCode:"+55",flag:"\ud83c\udde7\ud83c\uddf7"},{value:"AU",label:"Australie",phoneCode:"+61",flag:"\ud83c\udde6\ud83c\uddfa"},{value:"JP",label:"Japon",phoneCode:"+81",flag:"\ud83c\uddef\ud83c\uddf5"},{value:"CN",label:"Chine",phoneCode:"+86",flag:"\ud83c\udde8\ud83c\uddf3"},{value:"IN",label:"Inde",phoneCode:"+91",flag:"\ud83c\uddee\ud83c\uddf3"},{value:"NL",label:"Pays-Bas",phoneCode:"+31",flag:"\ud83c\uddf3\ud83c\uddf1"},{value:"SE",label:"Su\xe8de",phoneCode:"+46",flag:"\ud83c\uddf8\ud83c\uddea"},{value:"NO",label:"Norv\xe8ge",phoneCode:"+47",flag:"\ud83c\uddf3\ud83c\uddf4"},{value:"DK",label:"Danemark",phoneCode:"+45",flag:"\ud83c\udde9\ud83c\uddf0"},{value:"FI",label:"Finlande",phoneCode:"+358",flag:"\ud83c\uddeb\ud83c\uddee"}];let r=null,n=!1,s=null;const i=()=>{const[e,l]=(0,t.useState)((()=>r||o)),[a,i]=(0,t.useState)((()=>null===r)),[u,m]=(0,t.useState)((()=>null===r)),c=(0,t.useRef)(!1),d=(0,t.useRef)(!0);return(0,t.useEffect)((()=>{if(c.current)return;if(c.current=!0,r)return l(r),m(!1),void i(!1);const e=setTimeout((async()=>{if(d.current)try{const e=await(async()=>r||s||(s=new Promise((async e=>{try{n=!0;const l=new AbortController,a=setTimeout((()=>{l.abort()}),1e4),t=await fetch("https://restcountries.com/v3.1/all?fields=cca2,name,idd,flag,translations",{headers:{Accept:"application/json","User-Agent":"Mozilla/5.0 (compatible; Intelia/1.0)","Cache-Control":"no-cache"},signal:l.signal});if(clearTimeout(a),t.status,t.statusText,!t.ok)throw new Error(`API indisponible: ${t.status}`);const o=await t.json();if(o.length,!Array.isArray(o))throw new Error("Format de donn\xe9es invalide");const s=o.map((e=>{let l="";return e.idd?.root&&(l=e.idd.root,e.idd.suffixes&&e.idd.suffixes[0]&&(l+=e.idd.suffixes[0])),{value:e.cca2,label:e.translations?.fra?.common||e.name?.common||e.cca2,phoneCode:l,flag:e.flag||""}})).filter((e=>{const l=e.phoneCode&&"undefined"!==e.phoneCode&&"null"!==e.phoneCode&&e.phoneCode.length>1&&e.phoneCode.startsWith("+")&&/^\+\d+$/.test(e.phoneCode),a=e.value&&2===e.value.length&&e.label&&e.label.length>1;return l&&a})).sort(((e,l)=>e.label.localeCompare(l.label,"fr",{numeric:!0})));if(s.length,!(s.length>=50))throw s.length,new Error(`Qualit\xe9 insuffisante: ${s.length}/50 pays`);r=s,e(s)}catch(l){r=o,e(o)}finally{n=!1,s=null}})),s))();d.current&&(l(e),m(e===o),i(!1))}catch(e){d.current&&(l(o),m(!0),i(!1))}}),100);return()=>{clearTimeout(e),d.current=!1}}),[]),(0,t.useEffect)((()=>()=>{d.current=!1}),[]),e.length,(0,t.useMemo)((()=>({countries:e,loading:a,usingFallback:u})),[e,a,u])},u=e=>(0,t.useMemo)((()=>{const l=e.reduce(((e,l)=>(e[l.value]=l.phoneCode,e)),{});return Object.keys(l).length,l}),[e]),m={STORAGE_KEY:"intelia-remember-me-persist",save:(e,l)=>{try{if(!l||!e.trim())return void localStorage.removeItem(m.STORAGE_KEY);const a={email:e.trim(),rememberMe:!0,timestamp:Date.now(),version:"1.0"};localStorage.setItem(m.STORAGE_KEY,JSON.stringify(a)),e.trim()}catch(a){}},load:()=>{try{const e=localStorage.getItem(m.STORAGE_KEY);if(!e)return{rememberMe:!1,lastEmail:""};const l=JSON.parse(e);if(!l.email||"boolean"!==typeof l.rememberMe)return localStorage.removeItem(m.STORAGE_KEY),{rememberMe:!1,lastEmail:""};const a=Date.now()-(l.timestamp||0);return a>2592e6?(localStorage.removeItem(m.STORAGE_KEY),{rememberMe:!1,lastEmail:""}):(l.email,l.rememberMe,Math.round(a/864e5),{rememberMe:l.rememberMe,lastEmail:l.email})}catch(e){try{localStorage.removeItem(m.STORAGE_KEY)}catch(l){}return{rememberMe:!1,lastEmail:""}}},clear:()=>{try{localStorage.removeItem(m.STORAGE_KEY)}catch(e){}},preserveOnLogout:()=>{const e=m.load();return e.rememberMe&&e.lastEmail?{email:e.lastEmail,rememberMe:!0}:null},restoreAfterLogout:e=>{e&&e.rememberMe&&(m.save(e.email,!0),e.email)}}}};
<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Intelia Widget - Demo</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 40px 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .hero {
            text-align: center;
            color: white;
            margin-bottom: 60px;
        }

        .hero h1 {
            font-size: 3rem;
            margin-bottom: 20px;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
        }

        .hero p {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        .card {
            background: white;
            border-radius: 16px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.2);
            margin-bottom: 30px;
        }

        .card h2 {
            color: #1f2937;
            margin-bottom: 20px;
            font-size: 1.8rem;
        }

        .card p {
            color: #6b7280;
            line-height: 1.6;
            margin-bottom: 15px;
        }

        .code-block {
            background: #1f2937;
            color: #e5e7eb;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 20px 0;
            font-family: 'Courier New', monospace;
            font-size: 14px;
        }

        .code-block pre {
            margin: 0;
        }

        .button {
            display: inline-block;
            background: #2563eb;
            color: white;
            padding: 12px 24px;
            border-radius: 8px;
            text-decoration: none;
            font-weight: 500;
            transition: all 0.2s;
            border: none;
            cursor: pointer;
            font-size: 16px;
        }

        .button:hover {
            background: #1d4ed8;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(37, 99, 235, 0.3);
        }

        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .feature {
            background: #f9fafb;
            padding: 20px;
            border-radius: 8px;
            border-left: 4px solid #2563eb;
        }

        .feature h3 {
            color: #1f2937;
            margin-bottom: 10px;
            font-size: 1.1rem;
        }

        .feature p {
            color: #6b7280;
            font-size: 0.9rem;
        }

        .status {
            display: inline-block;
            padding: 6px 12px;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 500;
            margin: 10px 10px 10px 0;
        }

        .status.success {
            background: #d1fae5;
            color: #065f46;
        }

        .status.warning {
            background: #fef3c7;
            color: #92400e;
        }

        .alert {
            background: #dbeafe;
            border-left: 4px solid #2563eb;
            padding: 16px;
            border-radius: 8px;
            margin: 20px 0;
        }

        .alert h3 {
            color: #1e40af;
            margin-bottom: 8px;
        }

        .alert p {
            color: #1e3a8a;
            margin: 0;
        }

        footer {
            text-align: center;
            color: white;
            margin-top: 60px;
            opacity: 0.8;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="hero">
            <h1>üöÄ Intelia Widget Demo</h1>
            <p>Int√©grez un assistant IA sur votre site web en 2 minutes</p>
        </div>

        <div class="card">
            <h2>üéØ √Ä propos du Widget</h2>
            <p>
                Le widget Intelia permet d'ajouter un assistant IA conversationnel sur n'importe quel site web.
                Vos utilisateurs peuvent poser des questions et obtenir des r√©ponses instantan√©es bas√©es sur
                votre base de connaissances.
            </p>

            <div class="feature-grid">
                <div class="feature">
                    <h3>üîí S√©curis√©</h3>
                    <p>Authentification JWT c√¥t√© serveur pour prot√©ger votre API</p>
                </div>
                <div class="feature">
                    <h3>‚ö° Rapide</h3>
                    <p>R√©ponses en streaming pour une exp√©rience fluide</p>
                </div>
                <div class="feature">
                    <h3>üé® Personnalisable</h3>
                    <p>Couleurs, position, langue adaptables √† votre marque</p>
                </div>
                <div class="feature">
                    <h3>üìä Analytics</h3>
                    <p>Suivi de l'utilisation et des conversations</p>
                </div>
            </div>
        </div>

        <div class="card">
            <h2>üìã √âtape 1: Configuration Backend</h2>
            <p>Cr√©ez un endpoint sur votre serveur pour g√©n√©rer des tokens JWT:</p>

            <div class="code-block">
                <pre>// Node.js / Express exemple
const jwt = require('jsonwebtoken');

app.get('/api/widget-token', async (req, res) => {
  // V√©rifier que l'utilisateur est authentifi√©
  if (!req.user) {
    return res.status(401).json({ error: 'Unauthorized' });
  }

  const token = jwt.sign({
    client_id: 'votre-client-id',  // ID unique de votre entreprise
    user_id: req.user.id,
    user_email: req.user.email,
    exp: Math.floor(Date.now() / 1000) + (60 * 60)  // 1 heure
  }, process.env.WIDGET_JWT_SECRET);

  res.json({ token });
});</pre>
            </div>

            <div class="alert">
                <h3>‚ö†Ô∏è Important</h3>
                <p>Ne jamais exposer votre JWT_SECRET c√¥t√© client ! Le token doit toujours √™tre g√©n√©r√© c√¥t√© serveur.</p>
            </div>
        </div>

        <div class="card">
            <h2>üîß √âtape 2: Int√©gration Frontend</h2>
            <p>Ajoutez le widget √† votre site avec 2 lignes de code:</p>

            <div class="code-block">
                <pre>&lt;!-- Charger le widget --&gt;
&lt;script src="https://expert.intelia.com/widget/intelia-widget.js"&gt;&lt;/script&gt;

&lt;script&gt;
  // Initialiser le widget
  InteliaWidget.init({
    apiUrl: 'https://expert.intelia.com/api/v1/widget',
    getToken: async () => {
      // R√©cup√©rer le token depuis votre serveur
      const response = await fetch('/api/widget-token');
      const data = await response.json();
      return data.token;
    },
    userId: 'user-123',  // Optionnel
    userEmail: 'user@example.com',  // Optionnel
    position: 'bottom-right',  // 'bottom-right' ou 'bottom-left'
    primaryColor: '#2563eb',  // Couleur de votre marque
    locale: 'fr'  // 'fr' ou 'en'
  });
&lt;/script&gt;</pre>
            </div>

            <p>
                <button class="button" onclick="testWidget()">Tester le Widget</button>
                <span class="status warning" id="widget-status">Widget non initialis√©</span>
            </p>
        </div>

        <div class="card">
            <h2>üìñ Options de Configuration</h2>

            <table style="width: 100%; border-collapse: collapse;">
                <thead>
                    <tr style="background: #f9fafb;">
                        <th style="padding: 12px; text-align: left; border-bottom: 2px solid #e5e7eb;">Option</th>
                        <th style="padding: 12px; text-align: left; border-bottom: 2px solid #e5e7eb;">Type</th>
                        <th style="padding: 12px; text-align: left; border-bottom: 2px solid #e5e7eb;">Description</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td style="padding: 12px; border-bottom: 1px solid #e5e7eb;"><code>apiUrl</code></td>
                        <td style="padding: 12px; border-bottom: 1px solid #e5e7eb;">string</td>
                        <td style="padding: 12px; border-bottom: 1px solid #e5e7eb;"><strong>Requis.</strong> URL de l'API widget</td>
                    </tr>
                    <tr>
                        <td style="padding: 12px; border-bottom: 1px solid #e5e7eb;"><code>getToken</code></td>
                        <td style="padding: 12px; border-bottom: 1px solid #e5e7eb;">function</td>
                        <td style="padding: 12px; border-bottom: 1px solid #e5e7eb;"><strong>Requis.</strong> Fonction async qui retourne le JWT token</td>
                    </tr>
                    <tr>
                        <td style="padding: 12px; border-bottom: 1px solid #e5e7eb;"><code>userId</code></td>
                        <td style="padding: 12px; border-bottom: 1px solid #e5e7eb;">string</td>
                        <td style="padding: 12px; border-bottom: 1px solid #e5e7eb;">ID utilisateur dans votre syst√®me</td>
                    </tr>
                    <tr>
                        <td style="padding: 12px; border-bottom: 1px solid #e5e7eb;"><code>userEmail</code></td>
                        <td style="padding: 12px; border-bottom: 1px solid #e5e7eb;">string</td>
                        <td style="padding: 12px; border-bottom: 1px solid #e5e7eb;">Email de l'utilisateur</td>
                    </tr>
                    <tr>
                        <td style="padding: 12px; border-bottom: 1px solid #e5e7eb;"><code>position</code></td>
                        <td style="padding: 12px; border-bottom: 1px solid #e5e7eb;">string</td>
                        <td style="padding: 12px; border-bottom: 1px solid #e5e7eb;">'bottom-right' ou 'bottom-left'</td>
                    </tr>
                    <tr>
                        <td style="padding: 12px; border-bottom: 1px solid #e5e7eb;"><code>primaryColor</code></td>
                        <td style="padding: 12px; border-bottom: 1px solid #e5e7eb;">string</td>
                        <td style="padding: 12px; border-bottom: 1px solid #e5e7eb;">Couleur principale (hex)</td>
                    </tr>
                    <tr>
                        <td style="padding: 12px; border-bottom: 1px solid #e5e7eb;"><code>locale</code></td>
                        <td style="padding: 12px; border-bottom: 1px solid #e5e7eb;">string</td>
                        <td style="padding: 12px; border-bottom: 1px solid #e5e7eb;">'fr' ou 'en'</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div class="card">
            <h2>üîë Obtenir vos Identifiants</h2>
            <p>Pour utiliser le widget en production, vous devez:</p>
            <ol style="color: #6b7280; line-height: 2; margin-left: 20px;">
                <li>Cr√©er un compte client widget via l'√©quipe Intelia</li>
                <li>Recevoir votre <code>client_id</code> et <code>WIDGET_JWT_SECRET</code></li>
                <li>Configurer le secret dans vos variables d'environnement</li>
                <li>G√©n√©rer des tokens JWT c√¥t√© serveur</li>
            </ol>

            <div class="alert">
                <h3>üí° Mode Test</h3>
                <p>
                    Cette page de demo utilise un client de test. Pour tester localement,
                    contactez l'√©quipe Intelia pour obtenir vos identifiants de d√©veloppement.
                </p>
            </div>
        </div>

        <footer>
            <p>Powered by Intelia Expert | <a href="https://expert.intelia.com" style="color: white;">Documentation</a></p>
        </footer>
    </div>

    <!-- Charger le widget (comment√© pour l'instant car pas de token de test) -->
    <!--
    <script src="/widget/intelia-widget.js"></script>
    <script>
        function testWidget() {
            if (window.InteliaWidget) {
                // TODO: Remplacer par votre endpoint de g√©n√©ration de token
                InteliaWidget.init({
                    apiUrl: 'https://expert.intelia.com/api/v1/widget',
                    getToken: async () => {
                        // DEMO: Utiliser un token de test
                        // En production, appeler votre serveur
                        const response = await fetch('/api/widget-token');
                        const data = await response.json();
                        return data.token;
                    },
                    position: 'bottom-right',
                    primaryColor: '#667eea',
                    locale: 'fr'
                });
                document.getElementById('widget-status').textContent = 'Widget initialis√© ‚úì';
                document.getElementById('widget-status').className = 'status success';
            }
        }
    </script>
    -->

    <script>
        function testWidget() {
            alert('Widget demo: Pour tester en local, vous devez d\'abord configurer votre client_id et JWT secret.\n\nVoir la documentation ci-dessus.');
        }
    </script>
</body>
</html>
